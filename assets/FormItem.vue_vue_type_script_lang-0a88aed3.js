var G=Object.defineProperty,X=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var H=(e,u,m)=>u in e?G(e,u,{enumerable:!0,configurable:!0,writable:!0,value:m}):e[u]=m,f=(e,u)=>{for(var m in u||(u={}))Z.call(u,m)&&H(e,m,u[m]);if(B)for(var m of B(u))ee.call(u,m)&&H(e,m,u[m]);return e},J=(e,u)=>X(e,Y(u));import{e as F,u as n,d as te,H as se,t as oe,f as g,i as ne,A as ae,ad as $,E as le}from"./vue-7ba4ee8d.js";import{c as E}from"./componentMap-3c747af9.js";import{s as re,m as x,Q as N,k as ce,x as z,a2 as ie,a3 as de,a4 as fe}from"./index.js";import{N as ue,c as K,s as me}from"./helper-67eda2c0.js";import{ah as Q,ar as he,ap as pe,M as be}from"./antd-f3f9d490.js";function ge(e,u){return F(()=>{const m=n(e),{labelCol:j={},wrapperCol:L={}}=m.itemProps||{},{labelWidth:D,disabledLabelWidth:p}=m,{labelWidth:w,labelCol:I,wrapperCol:k,layout:q}=n(u);if(!w&&!D&&!I||p)return j.style={textAlign:"left"},{labelCol:j,wrapperCol:L};let P=D||w;const O=f(f({},I),j),_=f(f({},k),L);return P&&(P=re(P)?`${P}px`:P),{labelCol:f({style:{width:P}},O),wrapperCol:f({style:{width:q==="vertical"?"100%":`calc(100% - ${P})`}},_)}})}function W(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ne(e)}const Ie=te({name:"BasicFormItem",inheritAttrs:!1,props:{schema:{type:Object,default:()=>({})},formProps:{type:Object,default:()=>({})},allDefaultValues:{type:Object,default:()=>({})},formModel:{type:Object,default:()=>({})},setFormModel:{type:Function,default:null},tableAction:{type:Object},formActionType:{type:Object},isAdvanced:{type:Boolean}},setup(e,{slots:u}){const{t:m}=ce(),{schema:j,formProps:L}=se(e),D=ge(j,L),p=F(()=>{const{allDefaultValues:s,formModel:t,schema:l}=e,{mergeDynamicData:r}=e.formProps;return{field:l.field,model:t,values:f(f(f({},r),s),t),schema:l}}),w=F(()=>{var a;const{schema:s,tableAction:t,formModel:l,formActionType:r}=e;let{componentProps:o={}}=s;return x(o)&&(o=(a=o({schema:s,tableAction:t,formModel:l,formActionType:r}))!=null?a:{}),s.component==="Divider"&&(o=Object.assign({type:"horizontal"},{orientation:"left",plain:!0},o)),o}),I=F(()=>{const{disabled:s}=e.formProps,{dynamicDisabled:t}=e.schema,{disabled:l=!1}=n(w);let r=!!s||l;return N(t)&&(r=t),x(t)&&(r=t(n(p))),r});function k(){const{show:s,ifShow:t}=e.schema,{showAdvancedButton:l}=e.formProps,r=l&&N(e.isAdvanced)?e.isAdvanced:!0;let o=!0,a=!0;return N(s)&&(o=s),N(t)&&(a=t),x(s)&&(o=s(n(p))),x(t)&&(a=t(n(p))),o=o&&r,{isShow:o,isIfShow:a}}function q(){var v;const{rules:s=[],component:t,rulesMessageJoinLabel:l,label:r,dynamicRules:o,required:a}=e.schema;if(x(o))return o(n(p));let c=be(s);const{rulesMessageJoinLabel:M}=e.formProps,A=Reflect.has(e.schema,"rulesMessageJoinLabel")?l:M,y=K(t)+`${A?r:""}`;function b(d,i){const C=d.message||y;return i===void 0||de(i)||Array.isArray(i)&&i.length===0||typeof i=="string"&&i.trim()===""||typeof i=="object"&&Reflect.has(i,"checked")&&Reflect.has(i,"halfChecked")&&Array.isArray(i.checked)&&Array.isArray(i.halfChecked)&&i.checked.length===0&&i.halfChecked.length===0?Promise.reject(C):Promise.resolve()}const h=x(a)?a(n(p)):a;h&&(!c||c.length===0?c=[{required:h,validator:b}]:c.findIndex(i=>Reflect.has(i,"required"))===-1&&c.push({required:h,validator:b}));const R=c.findIndex(d=>Reflect.has(d,"required")&&!Reflect.has(d,"validator"));if(R!==-1){const d=c[R],{isShow:i}=k();if(i||(d.required=!1),t){Reflect.has(d,"type")||(d.type=t==="InputNumber"?"number":"string"),d.message=d.message||y,(t.includes("Input")||t.includes("Textarea"))&&(d.whitespace=!0);const C=(v=n(w))==null?void 0:v.valueFormat;me(d,t,C)}}const S=c.findIndex(d=>d.max);return S!==-1&&!c[S].validator&&(c[S].message=c[S].message||m("component.form.maxTip",[c[S].max])),c}function P(){var i;const{renderComponentContent:s,component:t,field:l,changeEvent:r="change",valueField:o}=e.schema,a=t&&["Switch","Checkbox"].includes(t),c=`on${fe(r)}`,M={[c]:(...C)=>{const[T]=C;h[c]&&h[c](...C);const V=T?T.target:null,U=V?a?V.checked:V.value:T;e.setFormModel(l,U,e.schema)}},A=E.get(t),{autoSetPlaceHolder:y,size:b}=e.formProps,h=J(f({allowClear:!0,getPopupContainer:C=>C.parentNode,size:b},n(w)),{disabled:n(I)});!h.disabled&&y&&t!=="RangePicker"&&t&&(h.placeholder=((i=n(w))==null?void 0:i.placeholder)||K(t)),h.codeField=l,h.formValues=n(p);const S={[o||(a?"checked":"value")]:e.formModel[l]},v=f(f(f({},h),M),S);if(!s)return g(A,v,null);const d=x(s)?f({},s(n(p),{disabled:n(I)})):{default:()=>s};return g(A,v,W(d)?d:{default:()=>[d]})}function O(){const{label:s,helpMessage:t,helpComponentProps:l,subLabel:r}=e.schema,o=r?g("span",null,[s,le(" "),g("span",{class:"text-secondary"},[r])]):s,a=x(t)?t(n(p)):t;return!a||Array.isArray(a)&&a.length===0?o:g("span",null,[o,g(ie,$({placement:"top",class:"mx-1",text:a},l),null)])}function _(){const{itemProps:s,slot:t,render:l,field:r,suffix:o,component:a}=e.schema,{labelCol:c,wrapperCol:M}=n(D),{colon:A}=e.formProps,y={disabled:n(I)};if(a==="Divider"){let b;return g(Q,{span:24},{default:()=>[g(he,n(w),W(b=O())?b:{default:()=>[b]})]})}else{const b=()=>t?z(u,t,n(p),y):l?l(n(p),y):P(),h=!!o,R=x(o)?o(n(p)):o;return ue.includes(a)&&e.schema&&(e.schema.itemProps=f({autoLink:!1},e.schema.itemProps)),g(pe.Item,$({name:r,colon:A,class:{"suffix-item":h}},s,{label:O(),rules:q(),labelCol:c,wrapperCol:M}),{default:()=>[g("div",{style:"display:flex"},[g("div",{style:"flex:1;"},[b()]),h&&g("span",{class:"suffix"},[R])])]})}}return()=>{let s;const{colProps:t={},colSlot:l,renderColContent:r,component:o}=e.schema;if(!E.has(o))return null;const{baseColProps:a={}}=e.formProps,c=f(f({},a),t),{isIfShow:M,isShow:A}=k(),y=n(p),b={disabled:n(I)};return M&&oe(g(Q,c,W(s=(()=>l?z(u,l,y,b):r?r(y,b):_())())?s:{default:()=>[s]}),[[ae,A]])}}});export{Ie as _};
